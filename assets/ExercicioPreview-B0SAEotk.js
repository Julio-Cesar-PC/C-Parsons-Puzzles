import{r as d,d as p,c as a,e,w as x,v as h,n as g,t as y,h as i,z as w,o as r}from"./index-tpaJuWnx.js";import{b as _}from"./exercicios-Bvxz1M4C.js";const k={class:"flex items-start flex-wrap justify-center min-h-2xl px-20 my-2"},E={class:"fixed inset-0 flex flex-col justify-center items-center z-50"},T={class:"w-1/4"},B={class:"bg-code text-primary-content p-4 rounded"},I={id:"modal-enviar",class:"modal"},j={class:"modal-box w-full max-w-7xl"},C={class:"flex gap-4"},M={role:"tablist",class:"tabs tabs-bordered pb-5 px-0 w-full"},L={key:0,type:"radio",name:"tabs-1",role:"tab",class:"tab","aria-label":"Python Tutor",checked:""},O={key:1,role:"tabpanel",class:"tab-content p-5 border rounded h-[55vh] w-full"},z=["src"],F={key:2,type:"radio",name:"tabs-1",role:"tab",class:"tab","aria-label":"OneCompiler"},H={key:3,role:"tabpanel",class:"tab-content p-5 border rounded h-[55vh] w-full"},P=["src"],V={__name:"ExercicioPreview",setup(D){const c=w(),t=d(""),n=d(!0);let s=null;const u=async()=>{try{n.value=!0;const l=c.params.id,o=await _(l);if(n.value=!1,o.exercicio)t.value=o.exercicio;else{document.getElementById("modal-error").showModal();return}s&&(document.getElementById("sortable").innerHTML="",document.getElementById("sortableTrash").innerHTML=""),t.value&&(s=new ParsonsWidget({sortableId:"sortable",trashId:"sortableTrash",max_wrong_lines:1,feedback_cb:m,lang:"ptbr"}),s.init(t.value.exercicio),s.shuffleLines())}catch(l){console.error("Erro ao buscar exercício",l)}},m=l=>{let o=l.errors.map(v=>`"log_error" ${v}`).join("<br>");document.getElementById("erros").innerHTML=`console > ${o}`},b=()=>{s&&(s.shuffleLines(),document.getElementById("erros").innerHTML="console >")},f=()=>{s.getFeedback().length===0?document.getElementById("modal-enviar").showModal():document.getElementById("modal-feedback").showModal()};return p(()=>{u()}),(l,o)=>(r(),a("main",null,[e("div",k,[x(e("div",E,o[0]||(o[0]=[e("div",{class:"bg-base-100 px-8 py-6 rounded-lg shadow-lg text-center bg-opacity-50"},[e("p",{class:"text-lg font-mono"},"Carregando exercício de visualização..."),e("div",{class:"loader mt-10"})],-1)]),512),[[h,n.value]]),e("div",{class:g([{"blur-sm":n.value},"px-10 py-5 rounded-lg shadow-lg w-full mx-auto h-[88vh] bg-base-300 flex justify-center gap-8 overflow-auto"])},[e("div",T,[e("div",{class:"w-full flex justify-evenly items-center my-4"},[e("div",{class:"join"},[e("button",{class:"btn btn-secondary join-item",onClick:b},"Resortear"),e("button",{class:"btn btn-primary join-item",onClick:f},"Enviar")])]),o[1]||(o[1]=e("div",{class:"divider"},null,-1)),o[2]||(o[2]=e("h1",{class:"text-2xl font-bold mb-4 text-center"},"Enunciado:",-1)),e("div",B,y(t.value.enunciado),1)]),o[3]||(o[3]=e("div",{class:"w-3/4"},[e("div",{class:"flex flex-wrap justify-evenly rounded mt-4 h-[70vh] max-h text-secondary-content"},[e("div",{id:"sortableTrash",class:"py-4 px-2 sortable-code bg-code overflow-auto h-full max-h rounded"}),e("div",{id:"sortable",class:"py-4 px-2 sortable-code bg-code overflow-auto h-full max-h rounded"})])],-1))],2)]),o[7]||(o[7]=e("dialog",{id:"modal-feedback",class:"modal"},[e("div",{class:"modal-box max-w-5xl"},[e("form",{method:"dialog"},[e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕")]),e("h3",{class:"text-lg font-bold"},"Feedback do Exercício"),e("p",{class:"mt-4"},"Verifique os erros e acertos do seu exercício."),e("div",{class:"divider"}),e("div",{id:"erros",class:"mt-4 p-4 bg-info-content rounded"},"console >"),e("p",{class:"text-sm mt-2 text-right italic text-code"}," O feedback te ajuda a enteder os erros da sua solução. ")])],-1)),o[8]||(o[8]=e("dialog",{id:"modal-error",class:"modal"},[e("div",{class:"modal-box"},[e("h3",{class:"text-lg font-bold"},"Erro ao carregar exercício!"),e("p",{class:"mt-4"},"Verifique se o ID está correto ou tente novamente mais tarde."),e("div",{class:"modal-action"},[e("form",{method:"dialog"},[e("button",{class:"btn"},"Fechar")])])])],-1)),e("dialog",I,[e("div",j,[o[4]||(o[4]=e("h3",{class:"text-lg font-bold"},"Exercício visualizado",-1)),o[5]||(o[5]=e("p",{class:"mt-4"},"Seu exercício foi visualizado corretamente.",-1)),e("div",C,[e("div",M,[t.value.pythonTutor?(r(),a("input",L)):i("",!0),t.value.pythonTutor?(r(),a("div",O,[e("iframe",{src:t.value.pythonTutor,class:"w-full h-full rounded-lg",title:"Python Tutor"},null,8,z)])):i("",!0),t.value.linkOneCompiler?(r(),a("input",F)):i("",!0),t.value.linkOneCompiler?(r(),a("div",H,[e("iframe",{src:`https://onecompiler.com/embed/c/${t.value.linkOneCompiler}?theme=dark&hideLanguageSelection=true&hideNew=true&hideNewFileOption=true`,class:"w-full h-full rounded-lg",title:"OneCompiler"},null,8,P)])):i("",!0)])]),o[6]||(o[6]=e("div",{class:"modal-action mt-6"},[e("form",{method:"dialog"},[e("button",{class:"btn btn-primary"},"Fechar")])],-1))])])]))}};export{V as default};
