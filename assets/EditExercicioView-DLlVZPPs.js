import{z as V,r as E,d as C,c as h,e as t,a as r,j,k as m,l as T,w as s,m as v,f as x,q as d,g as p,t as S,A as P,o as L}from"./index-tpaJuWnx.js";import{C as q,T as z}from"./CodeEditorC-DFXmGImr.js";import{b as I,u as M}from"./exercicios-Bvxz1M4C.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DaVyaJnr.js";const U={class:"flex items-center flex-wrap justify-center min-h-2xl px-20 my-2"},O={class:"px-1 py-1 rounded-lg shadow-lg w-full mx-auto h-[88vh] bg-base-300"},R={class:"container m-auto px-1 py-12"},A={class:"flex justify-between items-center mb-4"},N={role:"tablist",class:"tabs tabs-lifted pb-5 px-0"},B={role:"tabpanel",class:"tab-content p-5 bg-base-100 border rounded h-[70vh]"},D={class:"space-y-6 max-w-5xl mx-auto flex flex-col justify-between h-full"},F={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},W={role:"tabpanel",class:"tab-content p-5 bg-base-100 border rounded h-[70vh]"},G={class:"space-y-6 max-w-5xl mx-auto flex flex-col justify-between h-full"},H={role:"tabpanel",class:"tab-content p-5 bg-base-100 border rounded h-[70vh]"},J={class:"space-y-6 max-w-5xl mx-auto flex flex-col justify-between h-full"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Q=["onchange"],X={role:"tabpanel",class:"tab-content p-5 bg-base-100 border rounded-lg h-[70vh]"},Y={class:"flex justify-center gap-8 px-4"},Z={class:"w-1/4"},$={class:"bg-code text-primary-content p-4 rounded"},ne={__name:"EditExercicioView",setup(_){const f=P(),b=V().params.id,o=E({id:b,dificuldade:"",area:"",enunciado:"",exercicio:"",max_wrong_lines:1,pythonTutor:"",linkOneCompiler:"",tags:[],max_tries:""});let i=new ParsonsWidget({sortableId:"sortable",trashId:"sortableTrash",max_wrong_lines:1,lang:"ptbr"});C(async()=>{try{const l=await I(b);console.log("Exercício carregado:",l.status),l.status==="success"?(Object.assign(o.value,{...l.exercicio,tags:l.exercicio.tags.split(",")}),i.init(o.value.exercicio),i.shuffleLines()):alert("Erro ao carregar exercício: "+l.message)}catch(l){console.error("Erro ao carregar exercício:",l),alert("Ocorreu um erro ao carregar o exercício.")}});const y=()=>{const l={actionRequest:"updateExercicio",payload:{...o.value,tags:o.value.tags.join(",")}};M(l).then(e=>{e.status==="success"?(f.push({name:"exerciciosList"}),alert("Exercício atualizado com sucesso!")):alert("Erro ao atualizar exercício: "+e.message)}).catch(e=>{console.error("Erro ao atualizar exercício:",e),alert("Ocorreu um erro ao atualizar o exercício.")})},g=()=>{i.init(o.value.exercicio),i.shuffleLines()},w=()=>{i.getFeedback().length===0?alert("Parabéns! Você acertou o exercício!"):alert("Você ainda tem erros a corrigir.")},u=()=>{const l=document.querySelectorAll('input[name="tabs-1"]');let e=Array.from(l).findIndex(n=>n.checked);e<l.length-1&&(l[e+1].checked=!0)},c=()=>{const l=document.querySelectorAll('input[name="tabs-1"]');let e=Array.from(l).findIndex(n=>n.checked);e>0&&(l[e-1].checked=!0)};return(l,e)=>{const n=m("v-icon"),k=m("RouterLink");return L(),h("main",null,[t("div",U,[t("div",O,[t("div",R,[t("div",A,[r(k,{class:"btn btn-primary flex items-center gap-2",to:{name:"exerciciosList"}},{default:j(()=>[r(n,{name:"co-arrow-left"}),e[8]||(e[8]=p(" Voltar "))]),_:1}),e[9]||(e[9]=t("h1",{class:"text-3xl font-bold text-center flex-1"},"Criar Exercício Parsons Puzzle",-1)),e[10]||(e[10]=t("div",{class:"w-[100px]"},null,-1))]),t("form",{onSubmit:T(y,["prevent"]),class:""},[t("div",N,[e[27]||(e[27]=t("input",{type:"radio",name:"tabs-1",role:"tab",class:"tab","aria-label":"Editar",checked:""},null,-1)),t("div",B,[t("div",D,[t("div",null,[t("div",F,[t("div",null,[e[12]||(e[12]=t("label",{class:"label"},"Dificuldade:",-1)),s(t("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.dificuldade=a),class:"select w-full select-bordered",required:""},e[11]||(e[11]=[x('<option disabled value="">Selecione a dificuldade</option><option value="0">Muito fácil</option><option value="1">Fácil</option><option value="2">Médio</option><option value="3">Difícil</option><option value="4">Muito difícil</option>',6)]),512),[[v,o.value.dificuldade]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"label"},"Área do exercício:",-1)),s(t("select",{"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.area=a),class:"select w-full select-bordered",required:""},e[13]||(e[13]=[x('<option disabled value="">Selecione a área</option><option value="Entrada e saída">Entrada e saída</option><option value="Condicional">Condicional</option><option value="Laços de repetição">Laços de repetição</option><option value="Vetores (arrays)">Vetores (arrays)</option><option value="Matrizes">Matrizes</option><option value="Strings">Strings</option><option value="Funções">Funções</option><option value="Ponteiros">Ponteiros</option><option value="Structs">Structs</option><option value="Arquivos">Arquivos</option><option value="Recursão">Recursão</option>',12)]),512),[[v,o.value.area]])]),t("div",null,[e[15]||(e[15]=t("label",{class:"label"},"Tentativas máximas:",-1)),s(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=a=>o.value.max_tries=a),class:"input input-bordered w-full",placeholder:"Número de tentativas",min:"1",max:"10",required:""},null,512),[[d,o.value.max_tries]])])]),t("div",null,[e[16]||(e[16]=t("label",{class:"label"},"Enunciado:",-1)),s(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.enunciado=a),class:"textarea textarea-bordered w-full h-32",placeholder:"Descreva o desafio..."},null,512),[[d,o.value.enunciado]])])]),t("div",{class:"flex justify-end mt-auto"},[t("button",{type:"button",class:"btn btn-primary",onClick:u}," Próximo ")])])]),e[28]||(e[28]=t("input",{type:"radio",name:"tabs-1",role:"tab",class:"tab","aria-label":"Código"},null,-1)),t("div",W,[t("div",G,[t("div",null,[e[17]||(e[17]=t("label",{class:"label"},"Código (ordem correta):",-1)),r(q,{modelValue:o.value.exercicio,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.exercicio=a)},null,8,["modelValue"]),e[18]||(e[18]=t("p",{class:"text-sm text-gray-400 mt-1"},[p(" Use "),t("code",null,"#distractor"),p(" no final de linhas erradas. ")],-1))]),t("div",{class:"flex justify-end mt-auto"},[t("button",{type:"button",class:"btn btn-secondary mr-2",onClick:c}," Voltar "),t("button",{type:"button",class:"btn btn-primary",onClick:u}," Próximo ")])])]),e[29]||(e[29]=t("input",{type:"radio",name:"tabs-1",role:"tab",class:"tab","aria-label":"Opcionais"},null,-1)),t("div",H,[t("div",J,[t("div",null,[t("div",K,[t("div",null,[e[19]||(e[19]=t("label",{class:"label"},"Link Python Tutor:",-1)),s(t("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=a=>o.value.pythonTutor=a),class:"input input-bordered w-full",placeholder:"https://pythontutor.com/..."},null,512),[[d,o.value.pythonTutor]])]),t("div",null,[e[20]||(e[20]=t("label",{class:"label"},"Link One Compiler:",-1)),s(t("input",{type:"text","onUpdate:modelValue":e[6]||(e[6]=a=>o.value.linkOneCompiler=a),class:"input input-bordered w-full",placeholder:"https://onecompiler.com/..."},null,512),[[d,o.value.linkOneCompiler]])])]),t("div",null,[e[21]||(e[21]=t("label",{class:"label"},"Tags:",-1)),r(z,{class:"",modelValue:o.value.tags,"onUpdate:modelValue":e[7]||(e[7]=a=>o.value.tags=a)},null,8,["modelValue"])])]),t("div",{class:"flex justify-end mt-auto"},[t("button",{type:"button",class:"btn btn-secondary mr-2",onClick:c}," Voltar "),t("button",{type:"button",class:"btn btn-primary",onClick:u}," Próximo ")])])]),t("input",{type:"radio",name:"tabs-1",role:"tab",class:"tab","aria-label":"Preview",onchange:g()},null,8,Q),t("div",X,[t("div",Y,[t("div",Z,[t("div",{class:"w-full flex justify-evenly items-center my-4"},[t("div",{class:"join"},[e[22]||(e[22]=t("button",{disabled:"",class:"btn btn-secondary join-item"},"Resortear",-1)),t("button",{onClick:w,class:"btn btn-primary join-item"}," Testar ")])]),e[23]||(e[23]=t("div",{class:"divider"},null,-1)),e[24]||(e[24]=t("h1",{class:"text-2xl font-bold mb-4 text-center"},"Enunciado:",-1)),t("div",$,S(o.value.enunciado),1)]),t("div",{class:"w-3/4"},[e[26]||(e[26]=t("div",{class:"flex flex-wrap justify-evenly rounded mt-4 h-[55vh] max-h text-secondary-content"},[t("div",{id:"sortableTrash",class:"py-4 px-2 sortable-code bg-code overflow-auto h-full max-h rounded"}),t("div",{id:"sortable",class:"py-4 px-2 sortable-code bg-code overflow-auto h-full max-h rounded"})],-1)),t("div",{class:"flex justify-end mt-4"},[t("button",{type:"button",class:"btn btn-secondary mr-2",onClick:c}," Voltar "),e[25]||(e[25]=t("button",{type:"submit",class:"btn btn-primary"},"Salvar Exercício",-1))])])])])])],32)])])])])}}};export{ne as default};
