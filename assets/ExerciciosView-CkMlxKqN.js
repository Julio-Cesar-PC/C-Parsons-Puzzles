import{r as n,d as h,c as w,e,w as E,v as C,n as I,f as B,t as T,g as j,h as k,i as D,p as H,o as M}from"./index-B1_O94zj.js";const P={class:"flex items-start flex-wrap justify-center min-h-2xl px-20 my-2"},V={class:"fixed inset-0 flex flex-col justify-center items-center z-50"},_={class:"w-1/4"},L={class:"bg-code text-primary-content p-4 rounded"},A={__name:"ExerciciosView",setup(N){const s=n(""),l=n(!0);let a=null;const{userData:c,auth:d}=D(),r=n(1),i=async()=>{try{f(),l.value=!0,k(c.value).then(t=>{l.value=!1,t.exercicio?s.value=t.exercicio:document.getElementById("modal-error").showModal(),a&&(document.getElementById("sortable").innerHTML="",document.getElementById("sortableTrash").innerHTML=""),s.value&&(a=new ParsonsWidget({sortableId:"sortable",trashId:"sortableTrash",max_wrong_lines:1,feedback_cb:p,lang:"ptbr"}),a.init(s.value.exercicio),a.shuffleLines())})}catch(t){console.error("Erro ao buscar exercício",t)}},m=async()=>{i()},v=()=>{a&&a.getFeedback().length===0&&document.getElementById("modal-success").showModal()},x=async()=>{if(l.value=!0,d.value){const t={actionRequest:"postHistorico",payload:{userId:c.value.id,startDate:new Date,submitDate:new Date,state:"completo",exerciseId:s.value.id,triesCount:r.value,exerciseDifficulty:s.value.dificuldade},auth:d.value};await H(t)}u(),i()},u=()=>{g(),document.getElementById("modal-success").close()},b=()=>{r.value+=1},f=()=>{r.value=1},p=t=>{u();let o=t.errors.map(y=>`"log_error" ${y}`).join("<br>");t.errors.length>0&&b(),document.getElementById("erros").innerHTML=`console > ${o}`},g=()=>{document.getElementById("erros").innerHTML=""};return h(()=>{i()}),(t,o)=>(M(),w("main",null,[e("div",P,[E(e("div",V,o[0]||(o[0]=[e("div",{class:"bg-base-100 px-8 py-6 rounded-lg shadow-lg text-center bg-opacity-50 flex flex-col items-center"},[e("p",{class:"text-lg font-mono"},"Carregando novo desafio..."),e("div",{class:"loader mt-10"})],-1)]),512),[[C,l.value]]),e("div",{class:I([{"blur-sm":l.value},"px-10 py-5 rounded-lg shadow-lg w-full mx-auto h-[88vh] bg-base-300 flex justify-center gap-8 overflow-auto"])},[e("div",_,[e("div",null,[e("div",{class:"w-full flex justify-evenly items-center my-4"},[e("div",{class:"join"},[e("button",{onClick:m,class:"btn btn-secondary join-item"}," Resortear "),e("button",{onClick:v,class:"btn btn-primary join-item"},"Enviar")])]),o[1]||(o[1]=e("div",{class:"divider"},null,-1)),o[2]||(o[2]=e("h1",{class:"text-2xl font-bold mb-4 text-center"},"Enunciado:",-1)),e("div",L,T(s.value.enunciado),1)])]),o[3]||(o[3]=B('<div class="w-3/4"><div class="flex flex-wrap justify-evenly rounded mt-4 h-[70vh] max-h text-secondary-content"><div id="sortableTrash" class="py-4 px-2 sortable-code bg-code overflow-auto h-full max-h rounded"></div><div id="sortable" class="py-4 px-2 sortable-code bg-code overflow-auto h-full max-h rounded"></div></div><div class="divider"></div><div id="erros" class="mt-4 p-4 bg-info-content rounded">console &gt;</div></div>',1))],2)]),o[6]||(o[6]=e("dialog",{id:"modal-error",class:"modal"},[e("div",{class:"modal-box"},[e("h3",{class:"text-lg font-bold"},"Por enqunto não temos mais exercícios para você!"),e("p",{class:"mt-4 p-4"},[e("br"),j(" Você pode tentar novamente mais tarde, ou entrar em contato com o suporte. ")]),e("div",{class:"collapse bg-base-200"},[e("input",{type:"checkbox"}),e("div",{class:"collapse-title text-xl font-medium"},"Mostrar motivos"),e("div",{class:"collapse-content"},[e("ul",{class:"list-disc list-inside"},[e("li",null,"Não existe exercícios para seu nível"),e("li",null,"Erro de conexão"),e("li",null,"Erro no servidor"),e("li",null,"Erro no banco de dados")])])]),e("div",{class:"modal-action"},[e("form",{method:"dialog"},[e("button",{class:"btn mr-2"},"Fechar")])])])],-1)),e("dialog",{id:"modal-success",class:"modal"},[e("div",{class:"modal-box"},[o[5]||(o[5]=e("h3",{class:"text-lg font-bold"},"Parabéns! Você acertou o exercício!",-1)),e("div",{class:"modal-action"},[e("form",{method:"dialog"},[o[4]||(o[4]=e("button",{class:"btn mr-2"},"Continuar",-1)),e("button",{onClick:x,id:"btn-proximo-exercicio",class:"btn btn-primary"}," Avançar ")])])])])]))}};export{A as default};
