import{d as _,c as m,o as v,e,t as x,r as p,f as P,w as c,v as d,g as k,a as j,u,h as I,p as B}from"./index-DecNdDrZ.js";const b=_.create({baseURL:"https://script.google.com/macros/s/AKfycbywGgvJFPnwXUqMjWtUkGqaewTqq7LaPNyMq2EmzEN-e-MoML1crdOTinf7upsxpEhl/exec"}),D=async r=>{try{let o;return console.log("auth getExercicio: ",r),r!=null?o=await b.get("/exec?actionRequest=getExercicioAleatorio",{params:{dificuldade:"userDefault",userId:r.id}}):o=await b.get("/exec?actionRequest=getExercicioAleatorio",{params:{dificuldade:"0"}}),o.data}catch(o){console.error(o)}},M={class:"flex items-center gap-2"},T=["value","max"],q={__name:"ProgressLevelBar",props:{userLevel:String,levelProgress:Number,nextUserLevel:String,maxProgress:{type:Number,default:10}},setup(r){return(o,a)=>(v(),m("div",M,[e("p",null,x(r.userLevel),1),e("progress",{class:"progress progress-primary w-56",value:r.levelProgress,max:r.maxProgress},"Experiência",8,T),e("p",null,x(r.nextUserLevel),1)]))}},A={class:"flex items-start flex-wrap justify-center min-h-2xl px-20 my-2"},H={class:"px-10 py-5 rounded-lg shadow-lg w-full mx-auto h-[90vh] bg-base-300 flex justify-center gap-8"},U={class:"flex justify-center items-center"},N={class:"w-1/4"},C={key:0},R={class:"bg-code text-primary-content p-4 rounded"},V={class:"w-3/4"},$={class:"w-full flex justify-evenly items-center"},F={__name:"ParsonsView",setup(r){const o=p(null),a=p(!0);let n=null;const{userData:l,auth:f}=I(),i=async()=>{try{a.value=!0,D(l.value).then(t=>{a.value=!1,console.log("getExercicioAleatorio: ",t),o.value=t.exercicio,n&&(document.getElementById("sortable").innerHTML="",document.getElementById("sortableTrash").innerHTML=""),n=new ParsonsWidget({sortableId:"sortable",trashId:"sortableTrash",max_wrong_lines:1,feedback_cb:g,lang:"ptbr"}),n.init(o.value.exercicio),n.shuffleLines()})}catch(t){console.error("Erro ao buscar exercício",t)}},y=async()=>{i()},h=()=>{if(n){let t=n.getFeedback();t.length===0?(E("Parabéns! Você acertou o exercício!"),document.getElementById("btn-proximo-exercicio").removeAttribute("disabled")):g(t)}},w=async()=>{a.value=!0;const t={actionRequest:"postHistorico",payload:{userId:l.value.id,startDate:new Date,submitDate:new Date,state:"completo",exerciseId:o.value.id,triesCount:"1",exerciseDifficulty:o.value.dificuldade},auth:f.value};await B(t),i()},g=t=>{let s=t.errors.map(L=>`<p>${L}</p>`).join("");document.getElementById("erros").innerHTML=`<h2>Erros:</h2> ${s}`},E=t=>{document.getElementById("feedback").innerHTML=t,document.getElementById("feedback").removeAttribute("hidden")};return P(()=>{i()}),(t,s)=>(v(),m("main",null,[e("div",A,[e("div",H,[c(e("div",U,s[0]||(s[0]=[e("span",{class:"loading loading-dots loading-lg"},null,-1)]),512),[[d,a.value]]),c(e("div",N,[o.value?(v(),m("div",C,[s[1]||(s[1]=e("h1",{class:"text-2xl font-bold mb-6 text-center"},"Enunciado:",-1)),e("div",R,x(o.value.enunciado),1),s[2]||(s[2]=e("div",{class:"divider"},null,-1)),s[3]||(s[3]=e("div",{id:"erros",class:"mt-4 p-4 bg-info-content rounded"},null,-1)),s[4]||(s[4]=e("div",{id:"feedback",class:"mt-4 p-4 bg-success rounded text-primary-content",hidden:""},null,-1))])):k("",!0)],512),[[d,!a.value]]),c(e("div",V,[e("div",$,[e("div",{class:"join"},[e("button",{onClick:h,class:"btn btn-primary join-item"},"Enviar"),e("button",{onClick:y,class:"btn btn-secondary join-item"},"Resortear"),e("button",{onClick:w,id:"btn-proximo-exercicio",class:"btn btn-accent join-item",disabled:""},"Próximo")]),j(q,{userLevel:u(l).userLevel,levelProgress:u(l).levelProgress,nextUserLevel:u(l).nextUserLevel},null,8,["userLevel","levelProgress","nextUserLevel"])]),s[5]||(s[5]=e("div",{class:"flex flex-wrap justify-evenly rounded mt-4 h-[70vh] max-h text-secondary-content"},[e("div",{id:"sortableTrash",class:"py-4 px-2 sortable-code bg-code overflow-auto h-full max-h rounded"}),e("div",{id:"sortable",class:"py-4 px-2 sortable-code bg-code overflow-auto h-full max-h rounded"})],-1))],512),[[d,!a.value]])])])]))}};export{F as default};
