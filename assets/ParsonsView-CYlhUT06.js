import{d as P,c as x,o as c,e,t as g,r as b,f as k,w as m,v,g as f,h as j,u as i,i as B,p as I}from"./index-C1ABzVuq.js";const y=P.create({baseURL:"https://script.google.com/macros/s/AKfycbywGgvJFPnwXUqMjWtUkGqaewTqq7LaPNyMq2EmzEN-e-MoML1crdOTinf7upsxpEhl/exec"}),D=async r=>{try{let o;return console.log("auth getExercicio: ",r),r!=null?o=await y.get("/exec?actionRequest=getExercicioAleatorio",{params:{dificuldade:"userDefault",userId:r.id}}):o=await y.get("/exec?actionRequest=getExercicioAleatorio",{params:{dificuldade:"0"}}),o.data}catch(o){console.error(o)}},M={class:"flex items-center gap-2"},T=["value","max"],q={__name:"ProgressLevelBar",props:{userLevel:String,levelProgress:Number,nextUserLevel:String,maxProgress:{type:Number,default:10}},setup(r){return(o,a)=>(c(),x("div",M,[e("p",null,g(r.userLevel),1),e("progress",{class:"progress progress-primary w-56",value:r.levelProgress,max:r.maxProgress},"Experiência",8,T),e("p",null,g(r.nextUserLevel),1)]))}},A={class:"flex items-start flex-wrap justify-center min-h-2xl px-20 my-2"},H={class:"px-10 py-5 rounded-lg shadow-lg w-full mx-auto h-[90vh] bg-base-300 flex justify-center gap-8"},U={class:"flex justify-center items-center"},C={class:"w-1/4"},N={key:0},R={class:"bg-code text-primary-content p-4 rounded"},$={class:"w-3/4"},S={class:"w-full flex justify-evenly items-center"},F={__name:"ParsonsView",setup(r){const o=b(null),a=b(!0);let n=null;const{userData:l,auth:d}=B(),u=async()=>{try{console.log("auth: ",d.value),a.value=!0,D(l.value).then(t=>{a.value=!1,console.log("getExercicioAleatorio: ",t),o.value=t.exercicio,n&&(document.getElementById("sortable").innerHTML="",document.getElementById("sortableTrash").innerHTML=""),n=new ParsonsWidget({sortableId:"sortable",trashId:"sortableTrash",max_wrong_lines:1,feedback_cb:p,lang:"ptbr"}),n.init(o.value.exercicio),n.shuffleLines()})}catch(t){console.error("Erro ao buscar exercício",t)}},h=async()=>{u()},w=()=>{if(n){let t=n.getFeedback();t.length===0?(L("Parabéns! Você acertou o exercício!"),document.getElementById("btn-proximo-exercicio").removeAttribute("disabled")):p(t)}},E=async()=>{a.value=!0;const t={actionRequest:"postHistorico",payload:{userId:l.value.id,startDate:new Date,submitDate:new Date,state:"completo",exerciseId:o.value.id,triesCount:"1",exerciseDifficulty:o.value.dificuldade},auth:d.value};await I(t),u()},p=t=>{let s=t.errors.map(_=>`<p>${_}</p>`).join("");document.getElementById("erros").innerHTML=`<h2>Erros:</h2> ${s}`},L=t=>{document.getElementById("feedback").innerHTML=t,document.getElementById("feedback").removeAttribute("hidden")};return k(()=>{u()}),(t,s)=>(c(),x("main",null,[e("div",A,[e("div",H,[m(e("div",U,s[0]||(s[0]=[e("span",{class:"loading loading-dots loading-lg"},null,-1)]),512),[[v,a.value]]),m(e("div",C,[o.value?(c(),x("div",N,[s[1]||(s[1]=e("h1",{class:"text-2xl font-bold mb-6 text-center"},"Enunciado:",-1)),e("div",R,g(o.value.enunciado),1),s[2]||(s[2]=e("div",{class:"divider"},null,-1)),s[3]||(s[3]=e("div",{id:"erros",class:"mt-4 p-4 bg-info-content rounded"},null,-1)),s[4]||(s[4]=e("div",{id:"feedback",class:"mt-4 p-4 bg-success rounded text-primary-content",hidden:""},null,-1))])):f("",!0)],512),[[v,!a.value]]),m(e("div",$,[e("div",S,[e("div",{class:"join"},[e("button",{onClick:w,class:"btn btn-primary join-item"},"Enviar"),e("button",{onClick:h,class:"btn btn-secondary join-item"},"Resortear"),e("button",{onClick:E,id:"btn-proximo-exercicio",class:"btn btn-accent join-item",disabled:""},"Próximo")]),i(d)?(c(),j(q,{key:0,userLevel:i(l).userLevel,levelProgress:i(l).levelProgress,nextUserLevel:i(l).nextUserLevel},null,8,["userLevel","levelProgress","nextUserLevel"])):f("",!0)]),s[5]||(s[5]=e("div",{class:"flex flex-wrap justify-evenly rounded mt-4 h-[70vh] max-h text-secondary-content"},[e("div",{id:"sortableTrash",class:"py-4 px-2 sortable-code bg-code overflow-auto h-full max-h rounded"}),e("div",{id:"sortable",class:"py-4 px-2 sortable-code bg-code overflow-auto h-full max-h rounded"})],-1))],512),[[v,!a.value]])])])]))}};export{F as default};
